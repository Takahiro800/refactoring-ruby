# refactoring-ruby
リファクタリングRubyの学習用リポジトリ

- ソフトウェア開発は素晴らしいものを作りたいという思いと一連の価値観というフィルタを通してなされる小さな判断と行動の連続である。

# 1章
1. 機能を追加しやすい構造になっていないプログラムに機能を追加しなければならなくなったら、まずプログラムをリファクタリングして作業をしやすくしてから追加すること
## 1.2 リファクタリングの第一歩
- リファクタリングをするときの最初の一歩は、そのコードのためにしっかりとしたテストセットを作ること

1. リファクタリングを始める前に、しっかりとしたテストスイートを用意する。テストは自己診断テストでないといけない。

- 長ったらしいメソッドを見かけると、小さな部品に分解できないかを考える
- コードの部品は小さい方が、さまざまな面で管理しやすくなる

## 1.3 メソッドの分解・再配置
1. 新メソッドにスコープが限られる変数、つまりローコアる変数と引数になるべきものを元のコードから探す
2. コード内で変更されるか、変更されないかを確認する
   1. 変更されない変数は引数として渡せる
   2. 変更される変数は慎重に扱う
      1. ひとつだけなら戻り値として返せる

#### Tip
リファクタリングでは、プログラムを少しずつ変更すること。そうすれば、間違えてもすぐにバグを見つけられる.
```
#### Tip
コンピュータが理解できるコードなら誰でも書ける。優れたプログラマが書くのは、人間が理解できるコード
```

## 1.4 金額計算ルーチンの移動
- インスタンスメソッドをよく見て、所属しているクラスの情報を使っていなければ所属クラスの移行を検討する
  - 基本的にメソッドは使っているデータを持つオブジェクトに割り当てるべき
    - Move Method

移行の方法
1. 引数を取り除く
2. メソッド名の変更
3. 移動後のメソッドが動くかテストする
   1. 元のメソッドの中身は、新メソッドに処理を委ねるコードに置き換える
```ruby
class A
	def hoge
		# 移行してきたコードの処理内容
	end
end

class B
	def origin_medhot(a: intance_of(A))
		A.hoge
		# こんな感じで最初のテストは元のメソッドの中で移行の確認をする
	end
end
```
4. 古いメソッドを参照している箇所を全て新しいメソッドを参照するように置き換える